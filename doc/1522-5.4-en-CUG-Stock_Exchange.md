# Stock Exchange
**Customization Upgrade Guide**  
**Release 5.4**  
**Area**: Securities Trading

*Confidential*  
[www.avaloq.com](https://www.avaloq.com) | documentation@avaloq.com  
Â© 2022 Avaloq Evolution Ltd. All rights reserved.

---

## Latest Version
The latest version of this document can be found at:  
[https://docs.avaloq.com](https://docs.avaloq.com)

## Feedback
Please send any feedback to: documentation@avaloq.com

---

## Version History

| Version / Date      | Section | Description of the Change              |
|---------------------|---------|----------------------------------------|
| 5.4v0 / 31 Jan 2022 |         | This is a new document for Release 5.4 |

---

## Contents

1. Introduction  
    1.1 DOC_STEX DDIC: Executed Link Quantity Fields  
    1.2 Required Action from Clients  

---

## 1. Introduction

This document is for customization specialists. It describes the changes you might need to make to your existing customization when you upgrade to Avaloq Core Release 5.4.

---

### 1.1 DOC_STEX DDIC: Executed Link Quantity Fields

**Before Release 5.4**  
The sign of the following quantity fields from the linked execution order of the client/market order was always reversed in `DOC_STEX`:

- `DOC_STEX.exec_link_placed_qty`  
- `DOC_STEX.exec_link_executed_qty`

**From Release 5.4**  
This is no longer the case. These two fields in `DOC_STEX` now return the **same quantity** as the fields with the same name in `MEM_DOC_STEX`.

#### Comparison Table

| Order Type Group | Order Role               | Before 5.4 | From 5.4 | Value of Related `MEM_DOC_STEX` Field |
|------------------|--------------------------|------------|----------|----------------------------------------|
| Buy              | Client Order, Market Order | -10       | 10       | 10                                     |
| Buy              | CT Execution Order        | -10        | -10      | -10                                    |
| Sell             | Client Order, Market Order | 10        | -10      | -10                                    |
| Sell             | CT Execution Order        | 10         | 10       | 10                                     |

> *Note*: The behaviour on the `MEM_DOC` level **was not changed**. The column is included for easier comparison with `DOC` level.

---

### 1.2 Required Action from Clients

Check your sources using the above `DOC_STEX` fields in your customization.

#### To Identify:

Perform a global search (g-search with `[ALT+G]` in Ice) for the following keywords (use a dot prefix for DDIC expressions):

- `.exec_link_placed_qty`  
- `.exec_link_executed_qty`

#### Then:

- Revise any logic using these fields on the `DOC` level.
- No change is needed for `MEM_DOC` level usage.
- Be cautious of usage involving `abs(qty)`; reevaluate logic that handles sign conversions.

