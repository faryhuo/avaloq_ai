# Interest Rate Swap (upgrade steps)

**Customization Upgrade Guide**  
Release 5.4  
Area: Advanced Interest Derivatives  

---

## Latest version of this document  
The latest version of this document can be found at:  
[https://docs.avalog.com](https://docs.avalog.com)  

## Feedback  
Please send any feedback to:  
[documentation@avalog.com](mailto:documentation@avalog.com)  

**Copyright Avalog Group Ltd. All rights reserved.**  

> The information in this document is provided for informational purposes only, is subject to change without notice and is not warranted to be error-free. No part of this document may be used, reproduced or transmitted in any form or by any means unless authorized by Avalog Group Ltd through a written licence agreement. Further, this document does not grant any rights to, or in, the products mentioned therein and no rights of any kind relating to such products will be granted except pursuant to written agreements with Avalog Group Ltd.  
>  
> **Avalog Group Ltd.**  
> Alimendstr. 140 | CH-8027 Zürich | Switzerland  

---

## Version history  

| Version / Date       | Section | Description of the change                     |  
|----------------------|---------|-----------------------------------------------|  
| 5.4v0 / 27 Jan 2023 |         | This is a new document for release 5.4.       |  

---

## Contents  

1. **Introduction** ...... 5  
   1.1 Migration to new AE (Asset Evaluation) ...... 5  

---

### 1 Introduction  
This document is for customization specialists. It describes the changes you might want to make to your existing customization when you upgrade to Avaloq Core release 5.4.  

**Prerequisite knowledge**  
You are familiar with the Avaloq Banking System and are an Avaloq Certified Professional.  
In particular, you should understand the concepts in the following documents:  
- *Interest Rate Swap (IRS) - Customization Guide* (Doc. ID: 2087)  
- *Migration Preconditions - Upgrade Document* (Doc. ID: 1607)  

#### 1.1 Migration to new AE (Asset Evaluation)  
For more details specific to the new AE functionality, see:  
*Financial Instruments - Customization Upgrade Guide* (Doc ID: 4369).  

As part of migration to the new AE functionality:  
- The **“Calculation Scenario”** field on the IRS Unwind has become **mandatory**.  
- New field rule(s) for the `ae_calc_scen_id` (“Calculation Scenario”) field must be created.  
- Rules for both **IRS Unwind** and **Novation Step Out** must also be created.  

**Sample code snippet:**  

```sql
-- ASSET EVALUATION CALCULATION SCENARIO
-- UNWIND --
INSERT INTO DOC_DFLT_FLD_VAL_RULE_LD(
    RULE_SET,
    META_TYP,
    FLD,
    COND,
    RULE_KIND,
    RULE,
    PRIO,
    DESCN,
    RULE_ID
) VALUES (
    'IRS',
    'irs',
    'ae_calc_scen_id',
    '[doc.order_type_grp_id = code_order_type_grp.irs_unwind and doc.is_cfc_order = ''--'']',
    'expr',
    '[code_md_scen.std_id]',
    '1000',
    'DfIt AE Calc Scen',
    1
);

-- NOVATION - STEP OUT --
INSERT INTO DOC_DFLT_FLD_VAL_RULE_LD(
    RULE_SET,
    META_TYP,
    FLD,
    COND,
    RULE_KIND,
    RULE,
    PRIO,
    DESCN,
    RULE_ID
) VALUES (
    'IRS',
    'irs',
    'ae_calc_scen_id',
    '[doc.order_type_grp_id = code_order_type_grp.nov_step_out and doc.is_cfc_order = ''--'']',
    'expr',
    '[code_md_scen.std_id]',
    '1000',
    'DfIt AE Calc Scen',
    1
);