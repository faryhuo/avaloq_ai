# Financial Instruments
**Customization Upgrade Guide**  
**Release 5.4**  
**Area**: Financial Instruments  

*Confidential*  
[www.avaloq.com](https://www.avaloq.com) | documentation@avaloq.com  
© 2023 by Avaloq. All rights reserved.

---

## Latest Version
The latest version of this document can be found at [https://docs.avaloq.com](https://docs.avaloq.com)

## Feedback
Please send any feedback to: documentation@avaloq.com

---

## Copyright Notice

The information in this document is provided for informational purposes only, is subject to change without notice, and is not warranted to be error-free.  
No part of this document may be used, reproduced, or transmitted in any form or by any means unless authorized by Avaloq Group Ltd through a written licence agreement.  
Further, this document does not grant any rights to, or in, the products mentioned therein and no rights of any kind relating to such products will be granted except pursuant to written agreements with Avaloq Group Ltd.

Avaloq Group Ltd.  
Allmendstr. 140  
CH-8027 Zürich, Switzerland  
[www.avaloq.com](https://www.avaloq.com) | documentation@avaloq.com  

---

## Version History

| Version / Date        | Section | Description of the Change                                      |
|-----------------------|---------|-----------------------------------------------------------------|
| 5.4v1 / 22 March 2023 |         | Added a note about Asset Evaluation Engine changes in ACP 5.7. |
| 5.4v0 / 21 Jan 2022   |         | This is a new document for Release 5.4.                        |

---

## Contents

1. Introduction  
    1.1 De-release of `use_legacy_intr_crv`  

---

## 1. Introduction

In ACP Release 5.7, there are various customization changes associated with the Asset Evaluation Engine.  
You may decide to change your customization now, instead of waiting until you upgrade to ACP Release 5.7.

If you want to make the customization changes before you upgrade to 5.7, you can use a base parameter to enable the 5.7 behaviour in ACP Release 5.2 and later.  
For full details, see the *Financial Instruments – Customization Upgrade Guide* (doc. ID: 4369) for ACP Release 5.7.

This document is for customization specialists. It describes:

Changes you may need to make to your existing customization before you upgrade to release 5.4 because of the removal of support in 5.4 for the following items from the `avq.ae` base parameter:

| De-released base parameter items | Replacement | Migration details |
|----------------------------------|-------------|--------------------|
| `split_use_legacy_mode`         | None        | No migration necessary, because the consumers of the splitting functionality are all in the kernel. No object or doc migration is necessary. |
| `use_legacy_intr_crv`           | None        | The details are specified in the following section. |

> Note: You can make the necessary changes, described below, from Avaloq Core Release 5.2. You don't have to wait until release 5.4 to make these changes.

---

### 1.1 De-release of `use_legacy_intr_crv`

The `avq.ae` base parameter’s `use_legacy_intr_crv` item was used to control the way spread curves (object subtype `md_spread_crv`) stored data:

- In the **legacy mode**, the spread curve information was stored as *zero rate* in the market data domain `yield`.
- In the **non-legacy mode**, the information is stored as *discount factors* in the market data domain `df_crv`.

In the new mode (non-legacy), the data is generated by the bootstrapping task 1871.  
In the old legacy mode, you had to enter directly the zero rates onto the spread curve object.

#### Figures:
- **Figure 1**: Legacy mode – spread curve
- **Figure 2**: Non-legacy mode – spread curve

The spread curve object now also needs a *source collection* pointing to the list of spread curve MDOs used in bootstrapping task 1871.

- **Figure 3**: Spread curve object with collection of spread curve MDOs (non-legacy mode)

Each spread curve MDO needs calendar details to be set to identify its position on the curve.

- **Figure 4**: Spread curve MDO (non-legacy mode)

Finally, we need to feed market data to each point in the MD domain "INTR".

- **Figure 5**: Market data domain of the spread curve MDO

> Because the spread curve data is stored differently in the non-legacy mode, one has to bootstrap the spread curves for all backdated dates needed, to be able to use it.
